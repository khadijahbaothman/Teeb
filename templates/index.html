{% extends 'base.html' %}
{% block title %}البيانات الطبية الأساسية{% endblock %}
{% block content %}

<section class="hero with-image" style="background-image:url('{{ url_for('static', filename='bg22.jpeg') }}');">
  <div class="hero-center">
    <div>
      <h1 class="hero-title">البيانات الطبية الأساسية</h1>
      <p class="hero-sub">عبّئ الحقول بدقة. يتم الحفظ داخليًا، ويُنشأ رمز QR مربوط برقم نسك (يتم التحديث إذا تكرر رقم
        نسك).</p>
    </div>
  </div>
</section>

<section class="card glass">
  <form action="{{ url_for('submit') }}" method="post" class="form-grid" enctype="multipart/form-data">

    <!-- معلومات أساسية -->
    <div class="field">
      <label>الاسم <span class="req">*</span></label>
      <input name="full_name" required placeholder="محمد علي الحاج">
    </div>

    <div class="field">
      <label>العمر <span class="req">*</span></label>
      <input name="age" type="number" min="0" required placeholder="62">
    </div>

    <div class="field">
      <label>الجنسية <span class="req">*</span></label>
      <input name="nationality" list="nationalities" required placeholder="اختر الجنسية">
      <datalist id="nationalities">
        <!-- قائمة جنسيات عربية (يمكن الإضافة/التعديل) -->
        <option value="السعودية">
        <option value="مصر">
        <option value="اليمن">
        <option value="سوريا">
        <option value="الأردن">
        <option value="فلسطين">
        <option value="لبنان">
        <option value="العراق">
        <option value="المغرب">
        <option value="الجزائر">
        <option value="تونس">
        <option value="ليبيا">
        <option value="السودان">
        <option value="الإمارات">
        <option value="الكويت">
        <option value="قطر">
        <option value="البحرين">
        <option value="عُمان">
        <option value="تركيا">
        <option value="باكستان">
        <option value="الهند">
        <option value="إندونيسيا">
        <option value="ماليزيا">
        <option value="بنغلاديش">
        <option value="الفلبين">
        <option value="الصين">
        <option value="كوريا الجنوبية">
        <option value="اليابان">
        <option value="إثيوبيا">
        <option value="إريتريا">
        <option value="نيجيريا">
        <option value="جنوب أفريقيا">
        <option value="الولايات المتحدة">
        <option value="المملكة المتحدة">
        <option value="فرنسا">
        <option value="ألمانيا">
        <option value="إيطاليا">
        <option value="إسبانيا">
        <option value="كندا">
        <option value="أستراليا">
        <option value="البرازيل">
        <option value="الأرجنتين">
        <option value="روسيا">
        <option value="أوكرانيا">
        <option value="أفغانستان">
        <option value="سريلانكا">
        <option value="نيبال">
        <option value="تشاد">
        <option value="الصومال">
        <option value="موريتانيا">
        <option value="جيبوتي">
        <option value="بوركينا فاسو">
        <option value="مالي">
        <option value="النيجر">
        <option value="توغو">
        <option value="غامبيا">
        <option value="السنغال">
        <option value="ساحل العاج">
        <option value="غانا">
        <option value="الكاميرون">
        <option value="الكونغو">
        <option value="كينيا">
        <option value="تنزانيا">
        <option value="أوغندا">
        <option value="بولندا">
        <option value="هولندا">
        <option value="السويد">
        <option value="النرويج">
        <option value="سويسرا">
        <option value="النمسا">
        <option value="البرتغال">
        <option value="اليونان">
        <option value="رومانيا">
        <option value="بلغاريا">
        <option value="المجر">
        <option value="التشيك">
        <option value="سلوفاكيا">
        <option value="أيرلندا">
        <option value="بلجيكا">
        <option value="ليتوانيا">
        <option value="لاتفيا">
        <option value="إستونيا">
        <option value="أيسلندا">
        <option value="نيوزيلندا">
          <!-- ... تقدري تضيفي باقي الدول لو حبيتي -->
      </datalist>
    </div>

    <div class="field">
      <label>رقم نسك <span class="req">*</span></label>
      <input name="nusuk_id" required placeholder="123456">
    </div>

    <div class="field">
      <label>رقم الجوال <span class="req">*</span></label>
      <input name="phone" required placeholder="05xxxxxxxx">
    </div>

    <div class="field">
      <label>فصيلة الدم <span class="req">*</span></label>
      <select name="blood_type" required>
        <option value="">اختر فصيلة الدم</option>
        <option value="A+">A+</option>
        <option value="A-">A-</option>
        <option value="B+">B+</option>
        <option value="B-">B-</option>
        <option value="AB+">AB+</option>
        <option value="AB-">AB-</option>
        <option value="O+">O+</option>
        <option value="O-">O-</option>
      </select>
    </div>


    <!-- الأدوية أثناء الحج -->
    <!-- الأدوية الحالية -->
    <div class="field full">
      <label>الأدوية الحالية</label>
      <select name="meds_select" id="meds_select">
        <option value="" selected>لا يوجد</option>
        <option value="باراسيتامول (مسكن/خافض حرارة)">باراسيتامول (مسكن/خافض حرارة)</option>
        <option value="إيبوبروفين (مضاد التهاب)">إيبوبروفين (مضاد التهاب)</option>
        <option value="أوميبرازول (حموضة/ارتجاع)">أوميبرازول (حموضة/ارتجاع)</option>
        <option value="محلول إماهة فموية ORS">محلول إماهة فموية ORS</option>
        <option value="لوبراميد (الإسهال)">لوبراميد (الإسهال)</option>
        <option value="أخرى">أخرى</option>
      </select>
    </div>
  
    <!-- يظهر فقط إذا اختار "أخرى" -->
    <div class="field full" id="other_meds_field" style="display:none;">
      <label>اذكر اسم الدواء الآخر</label>
      <input type="text" name="meds_other" placeholder="اكتب اسم الدواء هنا">
    </div>
  
    <!-- صورة الدواء (اختياري) -->
    <div class="field full">
      <label>صورة الدواء (اختياري)</label>
      <input type="file" name="meds_image" accept="image/*" capture="environment">
      <small class="muted">يمكنك تصوير علبة الدواء/الروشتة لسهولة المراجعة</small>
    </div>
  
    <!-- زر الإرسال -->
    <div class="actions">
      <button class="btn" type="submit">إرسال</button>
    </div>
  </form>
</section>

<!-- سكرِبت إظهار/إخفاء “أخرى” -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const select = document.getElementById("meds_select");
    const otherField = document.getElementById("other_meds_field");
    select.addEventListener("change", () => {
      if (select.value === "أخرى"){
        otherField.style.display = "block";
      } else {
        otherField.style.display = "none";
        otherField.querySelector("input").value = "";
      }
    });
  });
  </script>

<style>
  /* تحسين شكل قوائم الاختيار المتعددة */
  .multi-list {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px 16px;
  }

  .multi-list label {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    border: 1px solid var(--border);
    border-radius: 12px;
    background: #fff;
  }

  .mt8 {
    margin-top: 8px
  }

  @media (max-width: 720px) {
    .multi-list {
      grid-template-columns: 1fr;
    }
  }
</style>

{% endblock %}